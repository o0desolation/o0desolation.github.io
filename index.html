<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="氷面鏡">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="氷面鏡">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="夏紀ゆず">
<meta name="twitter:card" content="summary">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>氷面鏡</title>
  








<meta name="generator" content="Hexo 4.2.0"></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">氷面鏡</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/29/JavaScript%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="夏紀ゆず">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="氷面鏡">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/29/JavaScript%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" itemprop="url">JavaScript正则表达式（含ES6扩展语法）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-29T23:09:26+08:00">
                2020-03-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><ul>
<li>字面值直接创建</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const regExp0 &#x3D; &#x2F;wh&#x2F;</span><br></pre></td></tr></table></figure>

<ul>
<li>新建一个正则表达式对象</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const regExp1 &#x3D; new RegExp(&quot;wh&quot;)	&#x2F;&#x2F;用字符串创建正则表达式对象</span><br><span class="line">const regExp2 &#x3D; new RegExp(&#x2F;wh&#x2F;)	&#x2F;&#x2F;用字面值创建正则表达式对象</span><br><span class="line"></span><br><span class="line">reg1&#x3D;&#x3D;reg2							&#x2F;&#x2F;false</span><br><span class="line">reg1.toString() &#x3D;&#x3D;&#x3D; reg2.toLocaleString()	&#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>

<p>toString()与toLocaleString()方法都会返回正则表达式字面值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new RegExp(new RegExp(&#x2F;wh&#x2F;g),&quot;i&quot;)		&#x2F;&#x2F; &#x2F;wh&#x2F;i</span><br></pre></td></tr></table></figure>

<p><strong>【ES6】</strong>RegExp构造函数第一个参数为RegExp对象时，可以使用第二个参数传入修饰符，覆盖原有的修饰符</p>
<h3 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h3><ul>
<li><code>i</code>：执行不区分大小写的匹配</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;Wh&#x2F;i.toString()&#x3D;&#x3D;&#x2F;wH&#x2F;i.toString()  &#x2F;&#x2F;false，同一个匹配规则不同的表达式</span><br></pre></td></tr></table></figure>

<ul>
<li><code>g</code>：执行全局匹配，即找到所有匹配为止，与exec()方法连用时，每执行一次，都从当前剩余子串开始，一次返回一个匹配串</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &quot;where when what&quot;</span><br><span class="line">const reg &#x3D; &#x2F;wh.*&#x2F;g</span><br><span class="line"></span><br><span class="line">reg.exec(str)		&#x2F;&#x2F;index:0</span><br><span class="line">reg.exec(str)		&#x2F;&#x2F;index:6		对上个匹配后的剩余子串进行匹配</span><br><span class="line">reg.exec(str)		&#x2F;&#x2F;index:11</span><br><span class="line">reg.exec(str)		&#x2F;&#x2F;null			剩余子串为空</span><br></pre></td></tr></table></figure>

<ul>
<li><code>m</code>：多行匹配模式，必须与^或$搭配使用，否则m修饰符无效。与^搭配使用时，匹配每一行的开头至换行符的子串；与$搭配使用时，匹配最后一行行尾至倒数第一个换行符的子串</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const str1 &#x3D; &quot;Can u cAn a caN&quot;</span><br><span class="line">const str2 &#x3D; &quot;Can u \ncAn a caN&quot;</span><br><span class="line">const str3 &#x3D; &quot;Can u \rcAn \na caN&quot;</span><br><span class="line"></span><br><span class="line">const reg1 &#x3D; &#x2F;^C.*&#x2F;img</span><br><span class="line">const reg2 &#x3D; &#x2F;.*n$&#x2F;img</span><br><span class="line">str1.match(reg1)		&#x2F;&#x2F;[&quot;Can u cAn a caN&quot;]，m修饰符无效，在整个串中进行匹配</span><br><span class="line">str2.match(reg1)		&#x2F;&#x2F;[&quot;Can u &quot;, &quot;cAn a caN&quot;]，从每一行行首开始进行匹配</span><br><span class="line">str3.match(reg2)		&#x2F;&#x2F;[&quot;a caN&quot;],从末行行尾匹配至倒数第一个换行符</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>【ES6】</strong><code>u</code>：Unicode模式，用来正确处理大于\uFFFF的Unicode字符，即可以正确处理4个字节的UTF-16编码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const utf16Str &#x3D; &#39;\uD824\uDFB7&#39;</span><br><span class="line">&#x2F;^\uD824&#x2F;.test(utf16Str)		&#x2F;&#x2F;true，未能将utf16Str视为4个字节</span><br><span class="line">&#x2F;^\uD824&#x2F;u.test(utf16Str)		&#x2F;&#x2F;false</span><br><span class="line"></span><br><span class="line">&#x2F;𠮷&#123;2&#125;&#x2F;.test(&#39;𠮷𠮷&#39;)		&#x2F;&#x2F;false</span><br><span class="line">&#x2F;𠮷&#123;2&#125;&#x2F;u.test(&#39;𠮷𠮷&#39;)		&#x2F;&#x2F;true</span><br><span class="line"></span><br><span class="line">&#x2F;^\S$&#x2F;.test(𠮷)				&#x2F;&#x2F;false</span><br><span class="line">&#x2F;^\S$&#x2F;u.test(𠮷)			&#x2F;&#x2F;true</span><br><span class="line"></span><br><span class="line">&#x2F;[a-z]&#x2F;i.test(&#39;\u212A&#39;)		&#x2F;&#x2F;false，标准大写字母K的unicode码为\u004B</span><br><span class="line">&#x2F;[a-z]&#x2F;iu.test(&#39;\u212A&#39;)	&#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>【ES6】</strong><code>y</code>：粘连（sticky）模式，在全局匹配时确保匹配从剩余子串的第一个位置开始</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &#39;abc-abcabc&#39;</span><br><span class="line">const reg1 &#x3D; &#x2F;abc&#x2F;g</span><br><span class="line">const reg2 &#x3D; &#x2F;abc&#x2F;y</span><br><span class="line"></span><br><span class="line">reg1.exec(str)		&#x2F;&#x2F;index:0</span><br><span class="line">reg1.exec(str)		&#x2F;&#x2F;index:4	剩余子串任意位置开始</span><br><span class="line"></span><br><span class="line">reg2.exec(str)		&#x2F;&#x2F;index:0</span><br><span class="line">reg2.exec(str)		&#x2F;&#x2F;null  	剩余子串第一位开始，此处为&#39;-&#39;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong>【ES6】</strong><code>s</code>：dotAll模式，使得<code>.</code>可以匹配行终止符</p>
<p>行终止符有：</p>
<ul>
<li>\u000A  即换行符<code>\n</code></li>
<li>\u000D  即回车符<code>\r</code></li>
<li>\u2028  行分隔符</li>
<li>\u2029  段分隔符</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;foo.bar&#x2F;.test(&#39;foo\nbar&#39;)		&#x2F;&#x2F;false</span><br><span class="line">&#x2F;foo.bar&#x2F;s&#x2F;test(&#39;foo\nbar&#39;)		&#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>

<h3 id="直接量字符"><a href="#直接量字符" class="headerlink" title="直接量字符"></a>直接量字符</h3><ul>
<li><code>\o</code>：NULL字符（\u0000）</li>
<li><code>\t</code>：制表符（\u0009）</li>
<li><code>\n</code>：换行符（\u000A）</li>
<li><code>\v</code>：垂直制表符（\u000B）</li>
<li><code>\f</code>：换页符（\u000C）</li>
<li><code>\r</code>：回车符（\u000D）</li>
<li><code>\xnn</code>：由十六进制数nn指定的拉丁字符，如\x0A等价于\n</li>
<li><code>\uxxxx</code>：由十六进制数制定的Unicode字符，如\u0009等价于\t</li>
<li><code>\cX</code>：控制字符^X，如\cJ等价于换行符\n</li>
<li><code>[\b]</code>：退格直接量，即Backspace</li>
</ul>
<h3 id="预设字符类"><a href="#预设字符类" class="headerlink" title="预设字符类"></a>预设字符类</h3><ul>
<li><code>[]</code>：方括号内的任意字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &#39;1245azc&#39;</span><br><span class="line">const reg &#x3D; &#x2F;[2-5a-c]&#x2F;g</span><br><span class="line">str.match(reg)				&#x2F;&#x2F;[&quot;2&quot;, &quot;4&quot;, &quot;5&quot;, &quot;a&quot;, &quot;c&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>[^]</code>：非方括号内的任意字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &#39;1245azc&#39;</span><br><span class="line">const reg &#x3D; &#x2F;[^2-5a-c]&#x2F;g</span><br><span class="line">str.match(reg)		&#x2F;&#x2F;[&quot;1&quot;, &quot;z&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>.</code>：除行终止符之外的任意字符</li>
<li><code>\w</code>：任何ASCII数字和大小写字母，等价于<code>[a-zA-Z0-9]</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">const str1 &#x3D; &#39;A\u212A-47&#39;</span><br><span class="line">const str2 &#x3D; &#39;A\u004B-47&#39;</span><br><span class="line">const reg &#x3D; &#x2F;\w&#x2F;g</span><br><span class="line">str1.match(reg)		&#x2F;&#x2F;[&quot;A&quot;, &quot;4&quot;, &quot;7&quot;]</span><br><span class="line">str2.match(reg)		&#x2F;&#x2F;[&quot;A&quot;, &quot;K&quot;, &quot;4&quot;, &quot;7&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>\W</code>：任何非ASCII数字和大小写字母，等价于<code>[^a-zA-Z0-9]</code></p>
</li>
<li><p><code>\s</code>：任何Unicode空白符</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &#39;a\r1\n+\u2028-\u2029&#39;</span><br><span class="line">const reg &#x3D; &#x2F;\s&#x2F;g</span><br><span class="line">str.match(reg)				&#x2F;&#x2F;[&quot;&quot;, &quot;↵&quot;, &quot;&quot;, &quot;&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>\S</code>：任何非空白的Unicode字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &#39;a\r1\n+\u2028-\u2029&#39;</span><br><span class="line">const reg &#x3D; &#x2F;\S&#x2F;g</span><br><span class="line">str.match(reg)				&#x2F;&#x2F;[&quot;a&quot;, &quot;1&quot;, &quot;+&quot;, &quot;-&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>\d</code>：任何ASCII数字，等价于<code>[0-9]</code></li>
<li><code>\D</code>：任何非ASCII数字，等价于<code>[^0-9]</code></li>
</ul>
<h3 id="重复数量"><a href="#重复数量" class="headerlink" title="重复数量"></a>重复数量</h3><ul>
<li><code>{m,n}</code>：m&lt;=匹配前一项数量&lt;=n</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#39;a&#39;.match(&#x2F;a&#123;2,4&#125;&#x2F;g)		&#x2F;&#x2F;null</span><br><span class="line">&#39;aaaaa&#39;.match(&#x2F;a&#123;2,4&#125;&#x2F;g)	&#x2F;&#x2F;[&quot;aaaa&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>{m,}</code>：匹配前一项数量&gt;=m</li>
<li><code>{n}</code>：匹配前一项n次</li>
<li><code>？</code>：匹配前一项0次或1次，即{0,1}</li>
<li><code>+</code>：匹配前一项1次或多次，即{1,}</li>
<li><code>*</code>：匹配前一项0次或多次，即{0,}</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;aaaa&#39;.match(&#x2F;a*&#x2F;g)			&#x2F;&#x2F;[&quot;aaaa&quot;, &quot;&quot;]  因为*会匹配0次&#39;a&#39;</span><br></pre></td></tr></table></figure>

<h3 id="选择、分组、引用"><a href="#选择、分组、引用" class="headerlink" title="选择、分组、引用"></a>选择、分组、引用</h3><ul>
<li><code>|</code>：选择，匹配该符号左边的表达式或右边的表达式，匹配顺序从左到右，左边匹配到就忽略右边匹配项</li>
<li><code>()</code>：分组，将若干匹配项组合为一个匹配项，以对整体进行<code>?</code> <code>*</code> <code>+</code> <code>|</code>操作，且记忆分组内容供引用操作使用</li>
<li><code>(?:)</code>：分组，将若干匹配项组合为一个匹配项，以对整体进行<code>?</code> <code>*</code> <code>+</code> <code>|</code>操作，不记忆分组内容</li>
<li>\n：引用，n代表分组的序号</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;[&#39;&quot;][^&#39;]*[&#39;&quot;]&#x2F;	</span><br><span class="line">&#x2F;([&#39;&quot;])[^&#39;]*\1&#x2F;</span><br></pre></td></tr></table></figure>

<p>两者等价，<code>\1</code>就是<code>([&#39;&quot;])</code>对这个分组的引用</p>
<p>在<code>String.prototype.replace()</code>中，可以使用<code>$分组序号</code>的方式作为第二个参数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.replace(&#x2F;([&#39;&quot;])[^&#39;]*\1&#x2F;g,&quot;$1&quot;)		&#x2F;&#x2F;将单双引号及内容替换为每一组单双引号的起始&#39;&quot;</span><br></pre></td></tr></table></figure>

<h3 id="锚字符"><a href="#锚字符" class="headerlink" title="锚字符"></a>锚字符</h3><ul>
<li><code>^</code>：匹配字符串的开头</li>
<li><code>$</code>：匹配字符串的结尾</li>
<li><code>\b</code>：匹配一个单词的边界</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &quot;this that sthiss&quot;</span><br><span class="line">str.match(&#x2F;this&#x2F;g)				&#x2F;&#x2F;[&quot;this&quot;,&quot;this&quot;]</span><br><span class="line">str.match(&#x2F;\bthis\b&#x2F;g)			&#x2F;&#x2F;[&quot;this&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>\B</code>：匹配非单词边界的位置</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &quot;athat thatb cthatd&quot;</span><br><span class="line">const regA &#x3D; &#x2F;\Bthat&#x2F;g</span><br><span class="line">const regB &#x3D; &#x2F;that\B&#x2F;g</span><br><span class="line">const regCD &#x3D; &#x2F;\Bthat\B&#x2F;g</span><br><span class="line">str.match(regA)					&#x2F;&#x2F;[&quot;that&quot;, &quot;that&quot;]	athat,cthatd</span><br><span class="line">str.match(regB)					&#x2F;&#x2F;[&quot;that&quot;, &quot;that&quot;]	thatb,cthatd</span><br><span class="line">str.match(regCD)				&#x2F;&#x2F;[&quot;that&quot;]		cthatd</span><br></pre></td></tr></table></figure>

<h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><ul>
<li><code>/x(?=y)/</code>先行断言</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;10% 20&#39;.match(&#x2F;\d+(?&#x3D;%)&#x2F;g)	&#x2F;&#x2F;[&quot;10&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>/x(?!y)/</code>先行否定断言</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;10% 20&#39;.match(&#x2F;\d+(?!%)&#x2F;g)		&#x2F;&#x2F;[&quot;1&quot;, &quot;20&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>/(?&lt;=y)x/</code>后行断言</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;$50 ￥100&#39;.match(&#x2F;(?&lt;&#x3D;\$)\d+&#x2F;g)	&#x2F;&#x2F;[&quot;50&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><code>/(?&lt;!y)x/</code>后行否定断言</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;$50 ￥100&#39;.match(&#x2F;(?&lt;!\$)\d+&#x2F;g)	&#x2F;&#x2F;[&quot;0&quot;, &quot;100&quot;]</span><br></pre></td></tr></table></figure>

<h3 id="RegExp实例属性"><a href="#RegExp实例属性" class="headerlink" title="RegExp实例属性"></a>RegExp实例属性</h3><table>
<thead>
<tr>
<th>属性名</th>
<th>属性类型</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>global</td>
<td>布尔值</td>
<td>是否设置了g修饰符</td>
</tr>
<tr>
<td>ignoreCase</td>
<td>布尔值</td>
<td>是否设置了i修饰符</td>
</tr>
<tr>
<td>mutiline</td>
<td>布尔值</td>
<td>是否设置了m修饰符</td>
</tr>
<tr>
<td>lastIndex</td>
<td>整数</td>
<td>一个计步器，表示开始搜索下一个匹配项的字符位置</td>
</tr>
<tr>
<td>source</td>
<td>字符串</td>
<td>正则表达式的字符串表示，即不含<code>\\</code>与<code>修饰符</code>的部分</td>
</tr>
<tr>
<td><strong>【ES6】</strong>sticky</td>
<td>布尔值</td>
<td>是否设置了y修饰符</td>
</tr>
<tr>
<td><strong>【ES6】</strong>flags</td>
<td>字符串</td>
<td>正则表达式的修饰符</td>
</tr>
</tbody></table>
<h3 id="RegExp实例方法"><a href="#RegExp实例方法" class="headerlink" title="RegExp实例方法"></a>RegExp实例方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &quot;where when what&quot;</span><br><span class="line">const regExp &#x3D; &#x2F;wh&#x2F;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>RegExp.prototype.exec(string)</strong> 返回首个匹配正则表达式的子串的首字符下标</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regExp.exec(str)		&#x2F;&#x2F;[ &#39;wh&#39;, index: 0, input: &#39;where when what&#39;, groups: undefined ]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>RegExp.prototype.test(string)</strong> 返回字符串是否匹配正则表达式的布尔值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">regExp.test(str)		&#x2F;&#x2F;true</span><br></pre></td></tr></table></figure>

<h3 id="字符串实例方法"><a href="#字符串实例方法" class="headerlink" title="字符串实例方法"></a>字符串实例方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const str &#x3D; &quot;This string contains numbers 123 Capitalized LETTERS and +_^% Symbols&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>String.prototype.match(RegExp)</strong> 返回匹配正则表达式的子串列表(g全局模式下)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str.match(&#x2F;Th.s&#x2F;g)		&#x2F;&#x2F;[&quot;This&quot;]</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>String.prototype.replace(RegExp,String)</strong>返回用String替代匹配正则表达式的子串</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const reg1 &#x3D; &#x2F;[^0-9A-Za-z\s]&#x2F;g</span><br><span class="line">str.replace(reg1,&quot;&quot;)		</span><br><span class="line">&#x2F;&#x2F;&#39;This string contains numbers 123 Capitalized LETTERS and  Symbols&#39;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>String.prototype.search(RegExp)</strong>返回首个匹配正则表达式的子串首字符下标</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">const reg2 &#x3D; &#x2F;\d&#x2F;g</span><br><span class="line">console.log(str.search(reg2));		&#x2F;&#x2F;29	即数字1的位置</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>String.prototype.split(RegExp)</strong>返回以匹配正则表达式的字符串为间隔的数组</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const reg3 &#x3D; &#x2F;\s&#x2F;g</span><br><span class="line">console.log(str.split(reg3));</span><br><span class="line">&#x2F;&#x2F;[&quot;This&quot;, &quot;string&quot;, &quot;contains&quot;, &quot;numbers&quot;, &quot;123&quot;, &quot;Capitalized&quot;, &quot;LETTERS&quot;, &quot;and&quot;, &quot;+_^%&quot;, &quot;Symbols&quot;]</span><br></pre></td></tr></table></figure>





<blockquote>
<p>【1】David Flanagan著. JavaScript权威指南（第6版）. 淘宝前端团队译.  机械工业出版社，2012.3</p>
<p>【2】Nicholas C.Zakas著. 《JavaScript高级程序设计（第3版）》李松峰，曹力译. 人民邮电出版社，2012.3</p>
<p>【3】阮一峰著. 《ES6标准入门（第3版）》. 电子工业出版社，2017.9</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/03/19/Electron-React%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%8F%8A%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="夏紀ゆず">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="氷面鏡">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/03/19/Electron-React%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E5%8F%8A%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1/" itemprop="url">Electron-React环境搭建及进程通信</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-03-19T10:51:54+08:00">
                2020-03-19
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/Electron/" itemprop="url" rel="index">
                    <span itemprop="name">Electron</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h2><h3 id="安装React"><a href="#安装React" class="headerlink" title="安装React"></a>安装React</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app electron-react</span><br></pre></td></tr></table></figure>



<h3 id="安装Electron"><a href="#安装Electron" class="headerlink" title="安装Electron"></a>安装Electron</h3><p>安装Electron</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i electron --save-dev</span><br></pre></td></tr></table></figure>



<p>可能会出现卡在node install.js的情况，原因是淘宝镜像的资源路径和官方的资源路径不同。<br>淘宝的镜像路径是<a href="http://npm.taobao.org/mirrors/electron/8.1.1/" target="_blank" rel="noopener">http://npm.taobao.org/mirrors/electron/8.1.1/</a><br>而electron默认的路径是<a href="http://npm.taobao.org/mirrors/electron/v8.1.1/" target="_blank" rel="noopener">http://npm.taobao.org/mirrors/electron/v8.1.1/</a></p>
<ul>
<li><p>解决方案一：</p>
<p><code>Ctrl+C</code>结束安装进程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd node_modules&#x2F;electron</span><br><span class="line">code install.js</span><br></pre></td></tr></table></figure>

<p><strong>./node_modules/electron/install.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">downloadArtifact(&#123;</span><br><span class="line">  version,</span><br><span class="line">  artifactName: &#39;electron&#39;,</span><br><span class="line">  force: process.env.force_no_cache &#x3D;&#x3D;&#x3D; &#39;true&#39;,</span><br><span class="line">  cacheRoot: process.env.electron_config_cache,</span><br><span class="line">  platform: process.env.npm_config_platform || process.platform,</span><br><span class="line">  arch: process.env.npm_config_arch || process.arch,</span><br><span class="line">  &#x2F;*********************新增以下部分**************************&#x2F;</span><br><span class="line">  mirrorOptions:&#123;</span><br><span class="line">    mirror:&#39;https:&#x2F;&#x2F;npm.taobao.org&#x2F;mirrors&#x2F;electron&#x2F;&#39;,</span><br><span class="line">    customDir:&#39;8.1.1&#39;,&#x2F;&#x2F;版本号根据安装版本而定</span><br><span class="line">  &#125;</span><br><span class="line">  &#x2F;*********************************************************&#x2F;</span><br><span class="line">&#125;).then((zipPath) &#x3D;&gt; extractFile(zipPath)).catch((err) &#x3D;&gt; onerror(err))</span><br></pre></td></tr></table></figure>

<p>修改后保存，执行<code>node install.js</code>，无报错即安装成功，返回根目录<code>cd..</code> <code>cd..</code></p>
<p>此种方法安装过后<code>package.json</code>中并没有<code>&quot;electron&quot;:&quot;^8.1.1&quot;</code>这一项，手动添加后会导致<code>electron .</code>命令无法被正确识别。故不推荐。</p>
</li>
</ul>
<ul>
<li><p>解决方案二（<strong>推荐</strong>）：</p>
<p>直接使用nrm 工具切换镜像源下载安装即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm remove electron</span><br><span class="line">nrm use cnpm</span><br><span class="line">npm i electron --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>其他方案：</p>
<p>网上流传的比如更改系统变量、electron镜像变量之类的回答均无效！</p>
</li>
</ul>
<p>根目录下新建<code>main.js</code></p>
<p><strong>./main.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">const &#123; app, BrowserWindow &#125; &#x3D; require(&#39;electron&#39;)</span><br><span class="line">function createWindow () &#123;   </span><br><span class="line">  &#x2F;&#x2F; 创建浏览器窗口</span><br><span class="line">  const win &#x3D; new BrowserWindow(&#123;</span><br><span class="line">    width: 800,</span><br><span class="line">    height: 600,</span><br><span class="line">    webPreferences: &#123;</span><br><span class="line">      nodeIntegration: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; 并且为你的应用加载index.html</span><br><span class="line">  &#x2F;&#x2F; win.loadFile(&#39;index.html&#39;)</span><br><span class="line">win.loadURL(&quot;http:&#x2F;&#x2F;localhost:3000&#x2F;&quot;);</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F; 打开开发者工具</span><br><span class="line">  &#x2F;&#x2F; win.webContents.openDevTools()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; This method will be called when Electron has finished</span><br><span class="line">&#x2F;&#x2F; initialization and is ready to create browser windows.</span><br><span class="line">&#x2F;&#x2F; 部分 API 在 ready 事件触发后才能使用。</span><br><span class="line">app.whenReady().then(createWindow)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; Quit when all windows are closed.</span><br><span class="line">app.on(&#39;window-all-closed&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; 在 macOS 上，除非用户用 Cmd + Q 确定地退出，</span><br><span class="line">  &#x2F;&#x2F; 否则绝大部分应用及其菜单栏会保持激活。</span><br><span class="line">  if (process.platform !&#x3D;&#x3D; &#39;darwin&#39;) &#123;</span><br><span class="line">    app.quit()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.on(&#39;activate&#39;, () &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; 在macOS上，当单击dock图标并且没有其他窗口打开时，</span><br><span class="line">  &#x2F;&#x2F; 通常在应用程序中重新创建一个窗口。</span><br><span class="line">  if (BrowserWindow.getAllWindows().length &#x3D;&#x3D;&#x3D; 0) &#123;</span><br><span class="line">    createWindow()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<p>添加electron启动命令</p>
<p><strong>./package.json</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;start&quot;: &quot;react-scripts start&quot;,</span><br><span class="line">  &quot;build&quot;: &quot;react-scripts build&quot;,</span><br><span class="line">  &quot;test&quot;: &quot;react-scripts test&quot;,</span><br><span class="line">  &quot;eject&quot;: &quot;react-scripts eject&quot;,</span><br><span class="line">  &quot;electron&quot;: &quot;electron .&quot;&#x2F;&#x2F;新增命令，以npm run electron运行</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<p>至此环境搭建基本完成。测试运行。</p>
<p><strong>Terminal one</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm start</span><br></pre></td></tr></table></figure>

<p><strong>Terminal two</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run electron</span><br></pre></td></tr></table></figure>



<h2 id="进程通信"><a href="#进程通信" class="headerlink" title="进程通信"></a>进程通信</h2><h4 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h4><p>创建一个无边框无菜单栏的electron应用，实现标题栏的拖曳以及最小化，最大化，取消最大化和关闭按钮</p>
<h4 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h4><ol>
<li><p>安装<code>electron-reload</code>模块，实现热加载方便调试</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i electron-reload --save-dev</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改main.js文件</p>
<p><strong>./main.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">const &#123; app, BrowserWindow &#125; &#x3D; require(&quot;electron&quot;);</span><br><span class="line">const ipcProcess &#x3D; require(&quot;.&#x2F;src&#x2F;mainProcess&#x2F;ipcProcess&quot;);   &#x2F;&#x2F;1.导入自建的进程通信模块</span><br><span class="line">require(&quot;electron-reload&quot;)(__dirname);    &#x2F;&#x2F;2.导入electron-reload模块实现热加载</span><br><span class="line"></span><br><span class="line">function createWindow() &#123;</span><br><span class="line"></span><br><span class="line">  const win &#x3D; new BrowserWindow(&#123;</span><br><span class="line">    width: 800,</span><br><span class="line">    height: 600,</span><br><span class="line">    frame: false,   &#x2F;&#x2F;3.取消窗口边框，这样会得到一个空白窗口</span><br><span class="line">    webPreferences: &#123;</span><br><span class="line">      nodeIntegration: true</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"> </span><br><span class="line">  win.loadURL(&quot;http:&#x2F;&#x2F;localhost:3000&#x2F;&quot;);</span><br><span class="line"></span><br><span class="line">  ipcProcess(win);    &#x2F;&#x2F;4.调用进程通信模块，参数为window对象</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.whenReady().then(createWindow);</span><br><span class="line"></span><br><span class="line">app.on(&quot;window-all-closed&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">  if (process.platform !&#x3D;&#x3D; &quot;darwin&quot;) &#123;</span><br><span class="line">    app.quit();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.on(&quot;activate&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">  if (BrowserWindow.getAllWindows().length &#x3D;&#x3D;&#x3D; 0) &#123;</span><br><span class="line">    createWindow();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建并编写ipcProcess模块</p>
<p><strong>./src/mainProcess/ipcProcess.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">const &#123; ipcMain &#125; &#x3D; require(&quot;electron&quot;);</span><br><span class="line"></span><br><span class="line">const ipc &#x3D; (win) &#x3D;&gt; &#123;</span><br><span class="line">  ipcMain.on(&quot;minimize&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">    win.minimize();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  ipcMain.on(&quot;isMaximized&quot;,(event,arg) &#x3D;&gt; &#123;</span><br><span class="line">    if(win.isMaximized())</span><br><span class="line">      event.returnValue &#x3D; true</span><br><span class="line">    else</span><br><span class="line">      event.returnValue &#x3D; false</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  ipcMain.on(&quot;maximize&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">    win.maximize();</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><br><span class="line">  ipcMain.on(&quot;unmaximize&quot;,() &#x3D;&gt; &#123;</span><br><span class="line">    win.unmaximize();</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  ipcMain.on(&quot;close&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">    win.close();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  &#x2F;&#x2F;双击标题栏也可改变最大化状态，所以需要向渲染进程发送消息改变图标</span><br><span class="line">  win.on(&quot;maximize&quot;,() &#x3D;&gt; &#123;</span><br><span class="line">    win.webContents.send(&quot;maximized&quot;)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  win.on(&quot;unmaximize&quot;,() &#x3D;&gt; &#123;</span><br><span class="line">    win.webContents.send(&quot;unmaximized&quot;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;;</span><br><span class="line">module.exports &#x3D; ipc;</span><br></pre></td></tr></table></figure>

<p>至此主进程编写完成。</p>
</li>
<li><p>安装<code>react-icons</code>模块</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i react-icons</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建并编写顶部标题栏组件</p>
<p><strong>./src/components/layout/windowTop/index.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123; useState, useEffect &#125; from &quot;react&quot;;</span><br><span class="line">import &quot;.&#x2F;index.css&quot;;</span><br><span class="line">import Minimize from &quot;react-icons&#x2F;lib&#x2F;md&#x2F;remove&quot;;</span><br><span class="line">import Maximize from &quot;react-icons&#x2F;lib&#x2F;md&#x2F;crop-square&quot;;</span><br><span class="line">import Close from &quot;react-icons&#x2F;lib&#x2F;md&#x2F;close&quot;;</span><br><span class="line">import UnMaximize from &quot;react-icons&#x2F;lib&#x2F;md&#x2F;filter-none&quot;;</span><br><span class="line">const electron &#x3D; window.require(&quot;electron&quot;);</span><br><span class="line"></span><br><span class="line">const WindowTop &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  const [isMaximized, setIsMaximized] &#x3D; useState(null);</span><br><span class="line"></span><br><span class="line">  const mainProcessListner &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    electron.ipcRenderer.on(&quot;maximized&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">      setIsMaximized(true);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    electron.ipcRenderer.on(&quot;unmaximized&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">      setIsMaximized(false);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  useEffect(() &#x3D;&gt; &#123;</span><br><span class="line">    setIsMaximized(electron.ipcRenderer.send(&quot;isMaximized&quot;));</span><br><span class="line">    mainProcessListner();</span><br><span class="line">  &#125;, []);</span><br><span class="line"></span><br><span class="line">  const minHandler &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    electron.ipcRenderer.send(&quot;minimize&quot;);</span><br><span class="line">  &#125;;</span><br><span class="line">  const maxHandler &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    if (!isMaximized) &#123;</span><br><span class="line">      electron.ipcRenderer.send(&quot;maximize&quot;);</span><br><span class="line">      setIsMaximized(true);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      electron.ipcRenderer.send(&quot;unmaximize&quot;);</span><br><span class="line">      setIsMaximized(false);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  const closeHandler &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    electron.ipcRenderer.send(&quot;close&quot;);</span><br><span class="line">  &#125;;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div className&#x3D;&quot;top&quot;&gt;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;minHandler&#125;&gt;</span><br><span class="line">        &lt;Minimize &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;button&gt;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;maxHandler&#125;&gt;</span><br><span class="line">        &#123;isMaximized ? &lt;UnMaximize &#x2F;&gt; : &lt;Maximize &#x2F;&gt;&#125;</span><br><span class="line">      &lt;&#x2F;button&gt;</span><br><span class="line">      &lt;button onClick&#x3D;&#123;closeHandler&#125;&gt;</span><br><span class="line">        &lt;Close &#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;button&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default WindowTop;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改App组件</p>
<p><strong>./src/App.js</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import React from &#39;react&#39;;</span><br><span class="line">import WindowTop from &#39;.&#x2F;components&#x2F;layout&#x2F;windowTop&#x2F;index&#39;;</span><br><span class="line">function App() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;WindowTop&#x2F;&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>
</li>
<li><p>设置全局样式</p>
<p><strong>./src/App.css</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:root&#123;</span><br><span class="line">  margin: 0;</span><br><span class="line">  padding: 0;</span><br><span class="line">  --primary-color: #a8d8ea;</span><br><span class="line">  --secondary-color: #aa96da;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>添加标题栏组件样式</p>
<p><strong>./src/components/layout/windowTop/index.css</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">@import url(&#39;..&#x2F;..&#x2F;..&#x2F;App.css&#39;);</span><br><span class="line">.top &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 30px;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: flex-end;</span><br><span class="line">  background-color:var(--primary-color);</span><br><span class="line">  -webkit-app-region: drag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">button &#123;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">  border: unset;</span><br><span class="line">  background-color:var(--primary-color);</span><br><span class="line">  color: aliceblue;</span><br><span class="line">  width: 50px;</span><br><span class="line">  outline: none;</span><br><span class="line">  -webkit-app-region: no-drag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">button:hover &#123;</span><br><span class="line">  background-color:var(--secondary-color);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/04/%E4%BF%AE%E5%A4%8DWindows%E7%B3%BB%E7%BB%9F%E9%BB%98%E8%AE%A4%E5%AD%97%E4%BD%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="夏紀ゆず">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="氷面鏡">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/04/%E4%BF%AE%E5%A4%8DWindows%E7%B3%BB%E7%BB%9F%E9%BB%98%E8%AE%A4%E5%AD%97%E4%BD%93/" itemprop="url">Windows 默认字体</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-04T10:56:57+08:00">
                2020-01-04
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Windows/" itemprop="url" rel="index">
                    <span itemprop="name">Windows</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>用于系统字体修复，以注册表运行即可</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">Windows Registry Editor Version 5.00</span><br><span class="line"></span><br><span class="line">[HKEY_CURRENT_USER\.DEFAULT\Control Panel\Desktop\WindowMetrics]</span><br><span class="line">&quot;BorderWidth&quot;&#x3D;&quot;-15&quot;</span><br><span class="line">&quot;CaptionFont&quot;&#x3D;hex:f4,ff,ff,ff,00,00,00,00,00,00,00,00,00,00,00,00,90,01,00,00,\</span><br><span class="line">00,00,00,01,00,00,05,00,4d,00,69,00,63,00,72,00,6f,00,73,00,6f,00,66,00,74,\</span><br><span class="line">00,20,00,59,00,61,00,48,00,65,00,69,00,20,00,55,00,49,00,00,00,00,00,00,00,\</span><br><span class="line">00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00</span><br><span class="line">&quot;CaptionHeight&quot;&#x3D;&quot;-330&quot;</span><br><span class="line">&quot;CaptionWidth&quot;&#x3D;&quot;-330&quot;</span><br><span class="line">&quot;IconFont&quot;&#x3D;hex:f4,ff,ff,ff,00,00,00,00,00,00,00,00,00,00,00,00,90,01,00,00,00,\</span><br><span class="line">00,00,01,00,00,05,00,4d,00,69,00,63,00,72,00,6f,00,73,00,6f,00,66,00,74,00,\</span><br><span class="line">20,00,59,00,61,00,48,00,65,00,69,00,20,00,55,00,49,00,00,00,00,00,00,00,00,\</span><br><span class="line">00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00</span><br><span class="line">&quot;IconTitleWrap&quot;&#x3D;&quot;1&quot;</span><br><span class="line">&quot;MenuFont&quot;&#x3D;hex:f4,ff,ff,ff,00,00,00,00,00,00,00,00,00,00,00,00,90,01,00,00,00,\</span><br><span class="line">00,00,01,00,00,05,00,4d,00,69,00,63,00,72,00,6f,00,73,00,6f,00,66,00,74,00,\</span><br><span class="line">20,00,59,00,61,00,48,00,65,00,69,00,20,00,55,00,49,00,00,00,00,00,00,00,00,\</span><br><span class="line">00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00</span><br><span class="line">&quot;MenuHeight&quot;&#x3D;&quot;-285&quot;</span><br><span class="line">&quot;MenuWidth&quot;&#x3D;&quot;-285&quot;</span><br><span class="line">&quot;MessageFont&quot;&#x3D;hex:f4,ff,ff,ff,00,00,00,00,00,00,00,00,00,00,00,00,90,01,00,00,\</span><br><span class="line">00,00,00,01,00,00,05,00,4d,00,69,00,63,00,72,00,6f,00,73,00,6f,00,66,00,74,\</span><br><span class="line">00,20,00,59,00,61,00,48,00,65,00,69,00,20,00,55,00,49,00,00,00,00,00,00,00,\</span><br><span class="line">00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00</span><br><span class="line">&quot;ScrollHeight&quot;&#x3D;&quot;-255&quot;</span><br><span class="line">&quot;ScrollWidth&quot;&#x3D;&quot;-255&quot;</span><br><span class="line">&quot;Shell Icon Size&quot;&#x3D;&quot;32&quot;</span><br><span class="line">&quot;SmCaptionFont&quot;&#x3D;hex:f4,ff,ff,ff,00,00,00,00,00,00,00,00,00,00,00,00,90,01,00,\</span><br><span class="line">00,00,00,00,01,00,00,05,00,4d,00,69,00,63,00,72,00,6f,00,73,00,6f,00,66,00,\</span><br><span class="line">74,00,20,00,59,00,61,00,48,00,65,00,69,00,20,00,55,00,49,00,00,00,00,00,00,\</span><br><span class="line">00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00</span><br><span class="line">&quot;SmCaptionHeight&quot;&#x3D;&quot;-330&quot;</span><br><span class="line">&quot;SmCaptionWidth&quot;&#x3D;&quot;-330&quot;</span><br><span class="line">&quot;StatusFont&quot;&#x3D;hex:f4,ff,ff,ff,00,00,00,00,00,00,00,00,00,00,00,00,90,01,00,00,\</span><br><span class="line">00,00,00,01,00,00,05,00,4d,00,69,00,63,00,72,00,6f,00,73,00,6f,00,66,00,74,\</span><br><span class="line">00,20,00,59,00,61,00,48,00,65,00,69,00,20,00,55,00,49,00,00,00,00,00,00,00,\</span><br><span class="line">00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00</span><br><span class="line">&quot;PaddedBorderWidth&quot;&#x3D;&quot;-60&quot;</span><br><span class="line">&quot;AppliedDPI&quot;&#x3D;dword:00000060</span><br><span class="line">&quot;IconSpacing&quot;&#x3D;&quot;-1130&quot;</span><br><span class="line">&quot;IconVerticalSpacing&quot;&#x3D;&quot;-1130&quot;</span><br><span class="line">&quot;MinAnimate&quot;&#x3D;&quot;1&quot;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/03/Hooks/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="夏紀ゆず">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="氷面鏡">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/03/Hooks/" itemprop="url">Hooks</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-01-03T08:56:10+08:00">
                2020-01-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/React/" itemprop="url" rel="index">
                    <span itemprop="name">React</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="React-Hooks"><a href="#React-Hooks" class="headerlink" title="React Hooks"></a>React Hooks</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import React , &#123; useState , useEffect &#125; from &#39;react&#39;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">const Demo &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">    const [count,setCount] &#x3D; useState(0)</span><br><span class="line"></span><br><span class="line">    useEffect(() &#x3D;&gt; &#123;</span><br><span class="line">        document.title &#x3D; &#96;clicked $&#123; count &#125; times&#96;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    return(</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;p&gt;clicked &#123; count &#125; times&lt;&#x2F;p&gt;</span><br><span class="line">            &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(count + 1)&#125;&gt;</span><br><span class="line">                click me                </span><br><span class="line">            &lt;&#x2F;button&gt;</span><br><span class="line">        &lt;&#x2F;&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">export default Demo</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/24/CentOS%E5%BC%80%E5%90%AFBBR%E5%8A%A0%E9%80%9F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="夏紀ゆず">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="氷面鏡">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/24/CentOS%E5%BC%80%E5%90%AFBBR%E5%8A%A0%E9%80%9F/" itemprop="url">CentOS开启BBR加速</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-24T15:30:51+08:00">
                2019-12-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="查看系统版本"><a href="#查看系统版本" class="headerlink" title="查看系统版本"></a>查看系统版本</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/redhat-release</span><br></pre></td></tr></table></figure>

<h4 id="CentOS-7"><a href="#CentOS-7" class="headerlink" title="CentOS 7"></a>CentOS 7</h4><ol>
<li>安装elrepo并升级内核</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rpm --import https:&#x2F;&#x2F;www.elrepo.org&#x2F;RPM-GPG-KEY-elrepo.org</span><br><span class="line">rpm -Uvh http:&#x2F;&#x2F;www.elrepo.org&#x2F;elrepo-release-7.0-2.el7.elrepo.noarch.rpm</span><br><span class="line">yum --enablerepo&#x3D;elrepo-kernel install kernel-ml -y</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>更新grub文件并重启</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">egrep ^menuentry &#x2F;etc&#x2F;grub2.cfg | cut -f 2 -d \&#39;</span><br><span class="line">grub2-set-default 0</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>查看内核版本号，大于4.1即可开启BBR，当前(2019.11)最新为5.3.13</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>编辑配置文件</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;etc&#x2F;sysctl.conf</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><code>sysctl.conf</code>中添加如下内容</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net.core.default_qdisc &#x3D; fq</span><br><span class="line">net.ipv4.tcp_congestion_control &#x3D; bbr</span><br></pre></td></tr></table></figure>

<ol start="6">
<li>加载系统参数</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p</span><br></pre></td></tr></table></figure>

<ol start="7">
<li>验证BBR是否开启</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#方式1：</span><br><span class="line">sysctl net.ipv4.tcp_available_congestion_control</span><br><span class="line">#返回：</span><br><span class="line">net.ipv4.tcp_available_congestion_control &#x3D; reno cubic bbr</span><br><span class="line"></span><br><span class="line">#方式2:</span><br><span class="line">lsmod | grep bbr</span><br><span class="line">#返回：</span><br><span class="line">tcp_bbr                20480  2	&#x2F;&#x2F;有值即可</span><br></pre></td></tr></table></figure>

<h4 id="CentOS-8"><a href="#CentOS-8" class="headerlink" title="CentOS 8"></a>CentOS 8</h4><p>由于CentOS 8内核版本高于4.1，所以无需更新内核，直接开启BBR即可</p>
<ol>
<li>简单起见，直接写入到<code>/etc/sysctl.conf</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;net.core.default_qdisc&#x3D;fq&quot; &gt;&gt; &#x2F;etc&#x2F;sysctl.conf</span><br><span class="line">echo &quot;net.ipv4.tcp_congestion_control&#x3D;bbr&quot; &gt;&gt; &#x2F;etc&#x2F;sysctl.conf</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>加载系统参数</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>检查开启状态</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sysctl -n net.ipv4.tcp_congestion_control</span><br><span class="line">lsmod | grep bbr</span><br></pre></td></tr></table></figure>




          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/24/SHELL%20Command/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="夏紀ゆず">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="氷面鏡">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/24/SHELL%20Command/" itemprop="url">SHELL Command Collection</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-24T15:30:51+08:00">
                2019-12-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><p>ssh</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -l [username] [SERVER]</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh [username]@[SERVER]</span><br></pre></td></tr></table></figure>
</li>
<li><p>scp </p>
<ul>
<li><p>download file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp [username]@[SERVER]:&#x2F;[REMOTE_PATH]&#x2F;[FILENAME] &#x2F;[LOCAL_PATH]&#x2F;</span><br></pre></td></tr></table></figure>
</li>
<li><p>upload file</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp &#x2F;[LOCAL_PATH]&#x2F;[FILENAME] [username]@[SERVER]:&#x2F;[REMOTE_PATH]&#x2F;</span><br></pre></td></tr></table></figure>
</li>
<li><p>download dir</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r [username]@[SERVER]:&#x2F;[REMOTE_PATH]&#x2F; &#x2F;[LOCAL_PATH]&#x2F;</span><br></pre></td></tr></table></figure>
</li>
<li><p>upload dir</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp -r &#x2F;[LOCAL_PATH]&#x2F; [username]@[SERVER]:&#x2F;[REMOTE_PATH]&#x2F;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Remote Script</p>
<ul>
<li><p>bench.sh <!--I/O Info & Network SpeedTest--></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget -qO- bench.sh | bash</span><br><span class="line">curl -Lso- bench.sh | bash</span><br></pre></td></tr></table></figure>

</li>
</ul>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/24/%E8%87%AA%E5%B7%B1%E7%B4%B9%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="夏紀ゆず">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="氷面鏡">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/12/24/%E8%87%AA%E5%B7%B1%E7%B4%B9%E4%BB%8B/" itemprop="url">自己紹介</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-12-24T15:30:51+08:00">
                2019-12-24
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><font size="6">ようこそ　柚子のブロッグへ</font><br><font size="5"><br>    夏紀ゆずと申します。<br>    CS専門です。<br>    出身や年齢や性別など不明、今はIT会社で務めております。<br>    色々趣味を持って、試したいものあれば試すから。<br>    よく「やさしい」って言われて、実は社交無能で本体がオタクです。<br>    オタクある特徴はほとんど持ってます。<br>    漫画が嫌、アニメ最高。<br>    ねぇねぇ、何？「体重」？秘密だよ秘密！<br>    このブロッグは勉強メモを載せるつもりです。<br>    よろしくね！<br></font></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="夏紀ゆず" />
            
              <p class="site-author-name" itemprop="name">夏紀ゆず</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/o0desolation" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:o0desolation@hotmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">夏紀ゆず</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
